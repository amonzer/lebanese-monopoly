function switch_player_turn(e,a){1===e?setTimeout(function(){""!=player.name&&(document.getElementById("player_turn").innerHTML=player.name+"",$(".player_details").css("boxShadow","2px 2px 5px red"),$(".agent_details").css("boxShadow","2px 2px 5px #000"))},400*a):setTimeout(function(){document.getElementById("player_turn").innerHTML=agent.name+"",$(".agent_details").css("boxShadow","2px 2px 5px red"),$(".player_details").css("boxShadow","2px 2px 5px #000")},400*a)}function move_player_on_spaces(e){var a=e+player.location;if(10>=a||a>=40){console.log("player-environment details:"),console.log("old: "+player.location),console.log("new: "+e),console.log("corner: <= 10");var o;if(o=player.location>=30?(player.location-30)*space_pixel:10*space_pixel,console.log("initial top: "+o/space_pixel+" with "+o+"px"),a>39)var s=player.location-40;else var s=player.location;0>s&&(s=0);var n;n=player.location<10?0:40-player.location;var l=e-n,c=s*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#player").animate({bottom:1e3-(o+r*space_pixel)+"px"});console.log("prev-extra-spaces: "+n),a>39&&(a-=40);for(var r=1;l>=r;r++)$("#player").animate({right:c+r*space_pixel+"px"});console.log("new-location: "+a),console.log("extra spaces: "+l)}else if(20>=a){var t;t=player.location<=10?player.location*space_pixel:10*space_pixel;var p=player.location-10;0>p&&(p=0);var n=10-player.location;0>n&&(n=0);var l=e-n,i=p*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#player").animate({right:t+r*space_pixel+"px"});for(var r=1;l>=r;r++)$("#player").animate({bottom:i+r*space_pixel+"px"});console.log("player-environment details:"),console.log("old: "+player.location),console.log("new: "+e),console.log("new-location: "+a),console.log("corner: <= 20"),console.log("prev extra spaces: "+n),console.log("extra spaces: "+l),console.log("initial bottom: "+p)}else if(30>=a){var g;g=player.location<=20?(player.location-10)*space_pixel:10*space_pixel;var m=player.location-20;0>m&&(m=0);var n=20-player.location;0>n&&(n=0);var l=e-n,y=m*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#player").animate({bottom:g+r*space_pixel+"px"});for(var r=1;l>=r;r++)$("#player").animate({right:1e3-(y+r*space_pixel)+"px"});console.log("player-environment details:"),console.log("old: "+player.location),console.log("new: "+e),console.log("new-location: "+a),console.log("corner: <= 30"),console.log("prev extra spaces: "+n),console.log("extra spaces: "+l),console.log("initial left: "+m)}else{var u;u=player.location<=30?(player.location-20)*space_pixel:10*space_pixel;var b=player.location-30;0>b&&(b=0);var n=30-player.location;0>n&&(n=0);var l=e-n,v=b*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#player").animate({right:1e3-(u+r*space_pixel)+"px"});for(var r=1;l>=r;r++)$("#player").animate({bottom:1e3-(v+r*space_pixel)+"px"});console.log("player-environment details:"),console.log("old: "+player.location),console.log("new: "+e),console.log("new-location: "+a),console.log("corner: <= 40"),console.log("prev extra spaces: "+n),console.log("extra spaces: "+l),console.log("initial top: "+b)}player.location=a,document.getElementById("player_location").innerHTML=spaces[a].name,player_turn=0,document.getElementById("play").innerHTML="End "+player.name+"'s Turn",console.log(spaces[player.location].name),console.log(spaces[player.location].price),console.log(spaces[player.location].vat),console.log(spaces[player.location].owner),setTimeout(function(){"bank"==spaces[player.location].owner?buySpace("player"):"agent"==spaces[player.location].owner?payVAT("player"):buyHouse("player")},400*e)}function move_agent_on_spaces(e){var a=e+agent.location;if(10>=a||a>=40){console.log("agent-environment details:"),console.log("old: "+agent.location),console.log("new: "+e),console.log("corner: <= 10");var o;if(o=agent.location>=30?(agent.location-30)*space_pixel:10*space_pixel,console.log("initial top: "+o/space_pixel+" with "+o+"px"),a>39)var s=agent.location-40;else var s=agent.location;0>s&&(s=0);var n;n=agent.location<10?0:40-agent.location;var l=e-n,c=s*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#agent").animate({bottom:1e3-(o+r*space_pixel)+"px"});console.log("prev-extra-spaces: "+n),a>39&&(a-=40);for(var r=1;l>=r;r++)$("#agent").animate({right:c+r*space_pixel+"px"});console.log("new-location: "+a),console.log("extra spaces: "+l)}else if(20>=a){var t;t=agent.location<=10?agent.location*space_pixel:10*space_pixel;var p=agent.location-10;0>p&&(p=0);var n=10-agent.location;0>n&&(n=0);var l=e-n,i=p*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#agent").animate({right:t+r*space_pixel+"px"});for(var r=1;l>=r;r++)$("#agent").animate({bottom:i+r*space_pixel+"px"});console.log("agent-environment details:"),console.log("old: "+agent.location),console.log("new: "+e),console.log("new-location: "+a),console.log("corner: <= 20"),console.log("prev extra spaces: "+n),console.log("extra spaces: "+l),console.log("initial bottom: "+p)}else if(30>=a){var g;g=agent.location<=20?(agent.location-10)*space_pixel:10*space_pixel;var m=agent.location-20;0>m&&(m=0);var n=20-agent.location;0>n&&(n=0);var l=e-n,y=m*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#agent").animate({bottom:g+r*space_pixel+"px"});for(var r=1;l>=r;r++)$("#agent").animate({right:1e3-(y+r*space_pixel)+"px"});console.log("agent-environment details:"),console.log("old: "+agent.location),console.log("new: "+e),console.log("new-location: "+a),console.log("corner: <= 30"),console.log("prev extra spaces: "+n),console.log("extra spaces: "+l),console.log("initial left: "+m)}else{var u;u=agent.location<=30?(agent.location-20)*space_pixel:10*space_pixel;var b=agent.location-30;0>b&&(b=0);var n=30-agent.location;0>n&&(n=0);var l=e-n,v=b*space_pixel;if(n>0)for(var r=1;n>=r;r++)$("#agent").animate({right:1e3-(u+r*space_pixel)+"px"});for(var r=1;l>=r;r++)$("#agent").animate({bottom:1e3-(v+r*space_pixel)+"px"});console.log("agent-environment details:"),console.log("old: "+agent.location),console.log("new: "+e),console.log("new-location: "+a),console.log("corner: <= 40"),console.log("prev extra spaces: "+n),console.log("extra spaces: "+l),console.log("initial top: "+b)}agent.location=a,document.getElementById("agent_location").innerHTML=spaces[a].name,player_turn=1,document.getElementById("play").innerHTML="Rolling Dice",console.log(spaces[player.location].name),console.log(spaces[player.location].price),console.log(spaces[player.location].vat),console.log(spaces[player.location].owner),setTimeout(function(){negotiateWithPlayer("agent"),"agent"==spaces[agent.location].owner&&buyHouse("agent"),"bank"==spaces[agent.location].owner&&buySpace("agent"),"player"==spaces[agent.location].owner&&payVAT("agent")},400*e)}function buySpace(e){if("player"==e){var a=player.location;player.balance-spaces[a].price>=0&&confirm("Do you want to Buy '"+spaces[a].name+"' from "+spaces[a].owner+" for "+spaces[a].price+"?")&&(player.balance-=spaces[a].price,bank.balance+=spaces[a].price,spaces[a].owner="player")}else{var a=agent.location;agent.balance-spaces[a].price>=0&&(agent.balance-=spaces[a].price,bank.balance+=spaces[a].price,spaces[a].owner="agent")}set_initial_info()}function buyHouse(e){if("player"==e){var a=player.location;player.balance-200>=0&&confirm("Do you want to Buy a house for '"+spaces[a].name+"' from bank for $200?")&&(player.balance-=200,bank.balance+=200,spaces[a].houses=spaces[a].houses+1)}else{var a=agent.location;agent.balance-spaces[a].price>=0&&(agent.balance-=200,bank.balance+=200,spaces[a].houses=spaces[a].houses+1)}set_initial_info(),set_initial_states_info()}function payVAT(e){if("player"==e){for(var a=0,o=player.location,s=spaces[o].color,n=spaces[o].vat+200*spaces[o].houses,l=0;l<spaces.length;l++)"agent"==spaces[l].owner&&spaces[l].color==s&&a++;if(3==a&&(n+=1e3),player.balance-n>=0)player.balance-=n,agent.balance+=n,alert(player.name+" paid the VAT $ "+n+" of the "+spaces[o].name+" state.");else{alert("Your balance is $"+player.balance+" so you don't have enough money to pay VAT $"+n);var l,c=!1;for(l=0;l<spaces.length;l++)if(spaces[l].owner==e&&spaces[l].price>=n){c=!0;break}c?(alert("The bank will inforce you to sell "+spaces[l].name+" $"+spaces[l].price),inforceSellToBank(e,l),payVAT(e)):(clearInterval(myGameTimer),$("#end_game").css("display","none"),$("#refresh_game").css("display","block"),$("#play").css("display","none"),$(".model_message #message").text("Computer Win."),$(".model_message").fadeIn())}}else{for(var a=0,o=agent.location,s=spaces[o].color,n=spaces[o].vat+200*spaces[o].houses,l=0;l<spaces.length;l++)"player"==spaces[l].owner&&spaces[l].color==s&&a++;if(3==a&&(n+=1e3),agent.balance-n>=0)agent.balance-=n,player.balance+=n,alert(agent.name+" paid the VAT $ "+n+" of the "+spaces[o].name+" state.");else{alert("Computer's balance is $"+agent.balance+" so he don't have enough money to pay VAT $"+n);var l,c=!1;for(l=0;l<spaces.length;l++)if(spaces[l].owner==e&&spaces[l].price>=n){c=!0;break}c?(alert("The bank will inforce Computer to sell "+spaces[l].name+" $"+spaces[l].price),inforceSellToBank(e,l),payVAT(e)):(clearInterval(myGameTimer),$("#end_game").css("display","none"),$("#refresh_game").css("display","block"),$("#play").css("display","none"),$(".model_message #message").text("You Win."),$(".model_message").fadeIn())}}set_initial_info()}function sellToBankByIndex(e,a){"player"==e&&confirm("Do you want to Sell your state '"+spaces[a].name+"' to the bank for '"+(spaces[a].price+spaces[a].price/2+200*spaces[a].houses)+"' ?")&&(player.balance+=spaces[a].price+spaces[a].price/2+200*spaces[a].houses,bank.balance-=spaces[a].price+spaces[a].price/2+200*spaces[a].houses,spaces[a].owner="bank",spaces[a].houses=0),set_initial_states_info(),set_initial_info()}function buyFromPlayerByIndex(e,a){var o=prompt("I want to buy this state from you for only $ ","");if(null!=o&&""!=o&&"player"==e){if(o>player.balance)return alert("You don't have enough money to pay this amount."),0;for(var s=spaces[a].color,n=spaces[a].price,l=0,c=0,r=0,t=0;t<spaces.length;t++)"player"==spaces[t].owner&&spaces[t].color==s&&""!=spaces[t].color&&l++,"agent"==spaces[t].owner&&spaces[t].color==s&&""!=spaces[t].color&&c++,"agent"==spaces[t].owner&&r++;var p=n+n/2*l+n/2*c+200*spaces[a].houses;if(console.log("nb of all states for agent: "+r),console.log("nb of states for player in this color: "+l),console.log("nb of states for agent in this color: "+c),console.log("old price: "+n),console.log("new price: "+p),console.log("offer price: "+o),p>o)return alert("The Computer agree to sell this state at least for $ "+p),0;if(10>=r)return alert("The Computer doesn't want to sell "+spaces[a].name+" to you."),0;r>10&&o>=p&&(alert("The Computer agree to sell "+spaces[a].name+" for $ "+o),player.balance-=parseInt(o),agent.balance+=parseInt(o),spaces[a].owner="player",spaces[a].houses=0)}set_initial_info()}function negotiateWithPlayer(e){for(var a=agent.location,o=spaces[a].color,s=0,n=0,l=0,c=0,r=0;r<spaces.length;r++)"player"==spaces[r].owner&&spaces[r].color==o&&""!=spaces[r].color&&(s++,c=r),"agent"==spaces[r].owner&&spaces[r].color==o&&""!=spaces[r].color&&n++,"agent"==spaces[r].owner&&l++;var t=spaces[c].price;if(console.log("nb of states for player in this color: "+s),console.log("nb of states for agent in this color: "+n),1==s&&2==n){var p=t+t/2*s+t/2*n+200*spaces[c].houses;if(agent.balance-p<1e3)return 0;if(10>=l)return 0;confirm("The Computer ask you to sell "+spaces[c].name+" to him for $ "+p)&&(agent.balance-=parseInt(p),player.balance+=parseInt(p),spaces[c].owner="agent",spaces[c].houses=0)}set_initial_info()}function inforceSellToBank(e,a){"player"==e?(player.balance+=spaces[a].price+200*spaces[a].houses,bank.balance-=spaces[a].price+200*spaces[a].houses,spaces[a].owner="bank",spaces[a].houses=0):(agent.balance+=spaces[a].price+200*spaces[a].houses,bank.balance-=spaces[a].price+200*spaces[a].houses,spaces[a].owner="bank",spaces[a].houses=0),set_initial_info()}function set_initial_info(){document.getElementById("player_id").innerHTML=player.id,document.getElementById("player_balance").innerHTML="$ "+player.balance,document.getElementById("player_name").innerHTML=player.name;for(var e="",a=0;a<spaces.length;a++)"player"==spaces[a].owner&&(e+="<a class=\"myState\" onclick=\"sellToBankByIndex('player', '"+a+"');\">",e+=spaces[a].name,e+="</a>");document.getElementById("player_states").innerHTML=e,document.getElementById("agent_id").innerHTML=agent.id,document.getElementById("agent_balance").innerHTML="$ "+agent.balance,document.getElementById("agent_name").innerHTML=agent.name;for(var e="",a=0;a<spaces.length;a++)"agent"==spaces[a].owner&&(e+="<a class=\"myState\" onclick=\"buyFromPlayerByIndex('player', '"+a+"');\">",e+=spaces[a].name,e+="</a>");document.getElementById("agent_states").innerHTML=e,document.getElementById("bank_balance").innerHTML=bank.balance;for(var a=0;a<spaces.length;a++)"player"==spaces[a].owner&&$(".s"+a).css("borderTop","solid thick blue"),"agent"==spaces[a].owner&&$(".s"+a).css("borderTop","solid thick red"),"bank"==spaces[a].owner&&$(".s"+a).css("borderTop","solid thin #222");var o=count_my_states("player");player.balance<1e3&&0==o&&(clearInterval(myGameTimer),$("#end_game").css("display","none"),$("#refresh_game").css("display","block"),$("#play").css("display","none"),$(".model_message #message").text("Computer Win."),$(".model_message").fadeIn());var o=count_my_states("agent");agent.balance<1e3&&0==o&&(clearInterval(myGameTimer),$("#end_game").css("display","none"),$("#refresh_game").css("display","block"),$("#play").css("display","none"),$(".model_message #message").text("You Win."),$(".model_message").fadeIn())}function set_initial_states_info(){for(var e=0;e<spaces.length;e++){var a="";spaces[e].houses>0&&(a=' <span class="red">H='+spaces[e].houses+"</span>"),$(".s"+e).html("<b>"+spaces[e].name+"</b> $"+spaces[e].price+a),$(".s"+e).css("backgroundColor",spaces[e].color)}}function count_my_states(e){for(var a=0,o=0;o<spaces.length;o++)spaces[o].owner==e&&a++;return a}var player={id:1,name:"",color:"blue",balance:1e4,location:0},agent={id:2,name:"Computer",color:"red",balance:1e4,location:0},bank={id:3,name:"Bank",color:"green",balance:3e4},space_pixel=100,spaces=[];spaces[0]={price:2e3,owner:"bank",name:"Jroud 3ersel",vat:500,houses:0,color:""},spaces[1]={price:2200,owner:"bank",name:"Al Kser",vat:800,houses:0,color:"#F8FD0F"},spaces[2]={price:1e3,owner:"bank",name:"Yabroud",vat:200,houses:0,color:"#F8FD0F"},spaces[3]={price:2200,owner:"bank",name:"7alab",vat:200,houses:0,color:""},spaces[4]={price:100,owner:"bank",name:"7omos",vat:400,houses:0,color:"#F8FD0F"},spaces[5]={price:2e3,owner:"bank",name:"7ay l Joura",vat:600,houses:0,color:"#EA9F9F"},spaces[6]={price:2e3,owner:"bank",name:"El 2ouze3e",vat:500,houses:0,color:"#EA9F9F"},spaces[7]={price:2600,owner:"bank",name:"Shaye7",vat:300,houses:0,color:""},spaces[8]={price:2600,owner:"bank",name:"7ay sellom",vat:200,houses:0,color:"#EA9F9F"},spaces[9]={price:1500,owner:"bank",name:"Borj l Barajne",vat:400,houses:0,color:""},spaces[10]={price:2800,owner:"bank",name:"Koria",vat:100,houses:0,color:""},spaces[11]={price:1e3,owner:"bank",name:"China",vat:200,houses:0,color:"#677DB8"},spaces[12]={price:3e3,owner:"bank",name:"Rusia",vat:200,houses:0,color:"#677DB8"},spaces[13]={price:3e3,owner:"bank",name:"Iran",vat:600,houses:0,color:""},spaces[14]={price:1e3,owner:"bank",name:"El Hermel",vat:200,houses:0,color:"#677DB8"},spaces[15]={price:3200,owner:"bank",name:"Shmestar",vat:1200,houses:0,color:""},spaces[16]={price:2e3,owner:"bank",name:"Ras l3ayn",vat:1e3,houses:0,color:"#C7DAF3"},spaces[17]={price:1e3,owner:"bank",name:"Taree2 l Matar",vat:200,houses:0,color:""},spaces[18]={price:3500,owner:"bank",name:"Ba7r l Oze3e",vat:100,houses:0,color:"#C7DAF3"},spaces[19]={price:1e3,owner:"bank",name:"El Rawshe",vat:200,houses:0,color:"#C7DAF3"},spaces[20]={price:4e3,owner:"bank",name:"Saleem Slem",vat:600,houses:0,color:""},spaces[21]={price:1e3,owner:"bank",name:"LIU",vat:200,houses:0,color:"#89DB7A"},spaces[22]={price:600,owner:"bank",name:"Alfa w touch",vat:400,houses:0,color:""},spaces[23]={price:600,owner:"bank",name:"Hadi Nsralla",vat:600,houses:0,color:"#89DB7A"},spaces[24]={price:2e3,owner:"bank",name:"Kazino Lebnen",vat:300,houses:0,color:"#89DB7A"},spaces[25]={price:2e3,owner:"bank",name:"Laylaki",vat:200,houses:0,color:""},spaces[26]={price:1e3,owner:"bank",name:"7ay Madi",vat:600,houses:0,color:"#DB78B8"},spaces[27]={price:1e3,owner:"bank",name:"Bir l 3abed",vat:200,houses:0,color:""},spaces[28]={price:1e3,owner:"bank",name:"3ayn Tene",vat:900,houses:0,color:"#DB78B8"},spaces[29]={price:1200,owner:"bank",name:"Al Mayadeen",vat:200,houses:0,color:"#DB78B8"},spaces[30]={price:1e3,owner:"bank",name:"Borj Hamoud",vat:200,houses:0,color:""},spaces[31]={price:1400,owner:"bank",name:"Jneh",vat:300,houses:0,color:"#FABD2A"},spaces[32]={price:1500,owner:"bank",name:"Barcelona",vat:500,houses:0,color:""},spaces[33]={price:1400,owner:"bank",name:"Iraq - Mousel",vat:600,houses:0,color:"#FABD2A"},spaces[34]={price:1600,owner:"bank",name:"Yemah",vat:600,houses:0,color:"#FABD2A"},spaces[35]={price:2e3,owner:"bank",name:"7ay Sha8our",vat:500,houses:0,color:""},spaces[36]={price:1800,owner:"bank",name:"Ras B3albek",vat:700,houses:0,color:"#f09ede"},spaces[37]={price:1e3,owner:"bank",name:"Mat3am Jawad",vat:700,houses:0,color:""},spaces[38]={price:1800,owner:"bank",name:"Ouzville",vat:500,houses:0,color:"#f09ede"},spaces[39]={price:2e3,owner:"bank",name:"Safara Iranis",vat:500,houses:0,color:"#f09ede"},console.log(spaces);var player_turn=1;window.onload=function(){switch_player_turn(player_turn,0)};